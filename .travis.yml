language: php
php:
  - 5.4
env:
  - WP_VERSION=3.8
  - WP_VERSION=4.0
  - WP_VERSION=4.5
before_script:
  - echo 'date.timezone = "Asia/Tokyo"' >> ~/.phpenv/versions/$(phpenv version-name)/etc/conf.d/travis.ini
  - echo 'short_open_tag = On' >> ~/.phpenv/versions/$(phpenv version-name)/etc/conf.d/travis.ini
  - composer install
  - mysql -uroot -e "create database custom_post_type"
  - cd ./test && mkdir ./wp
  - export PATH=../vendor/bin:$PATH
  - wp core download --version=$WP_VERSION  --path=./wp/$WP_VERSION
  - wp core config --path=./wp/$WP_VERSION
  - wp core install --path=./wp/$WP_VERSION
script: ../vendor/phpunit/phpunit/phpunit -c ./phpunit.xml
